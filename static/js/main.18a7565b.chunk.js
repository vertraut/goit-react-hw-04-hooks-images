(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{21:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),o=n(4),s=n.n(o),i=(n(21),n(9)),l=n(3),u=n(7);n(22);function j(e){var t=e.onSubmit,n=Object(a.useState)(""),r=Object(l.a)(n,2),o=r[0],s=r[1];return Object(c.jsx)("header",{className:"Searchbar",children:Object(c.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault();var n,c=o.trim().toLocaleLowerCase();if(""===c)return n="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441",void u.b.error(n);t(c),s("")},children:[Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(c.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){s(e.target.value)}})]})})}function b(e){var t=e.img,n=e.alt,a=e.onClick,r=e.largeImg;return Object(c.jsx)("li",{className:"ImageGalleryItem",children:Object(c.jsx)("img",{src:t,alt:n,className:"ImageGalleryItem-image",onClick:function(){return a({alt:n,largeImg:r})}})})}function m(e){var t=e.action;return Object(c.jsx)("div",{className:"LoadMore",children:Object(c.jsx)("button",{className:"Button",onClick:t,children:"Load more"})})}var d=n(11),h=n(12),O=n(15),g=n(14),f=document.querySelector("#modal-root"),p=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(d.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).handleKeyDown=function(t){"Escape"===t.key&&e.props.onClick()},e.handleBackDropClick=function(t){t.target===t.currentTarget&&e.props.onClick()},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.alt;return Object(o.createPortal)(Object(c.jsx)("div",{className:"Overlay",onClick:this.handleBackDropClick,children:Object(c.jsx)("div",{className:"Modal",children:Object(c.jsx)("img",{src:t,alt:n})})}),f)}}]),n}(a.Component);var v=function(e,t,n){var c="".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("19101483-97eb89a6c64111aa623235b5f","&image_type=photo&orientation=horizontal&per_page=").concat(n);return console.log(c),fetch(c).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))}))},x=n(13),y=n.n(x);n(10);function S(e){var t=e.size;return Object(c.jsx)("div",{className:"Loader",children:Object(c.jsx)(y.a,{type:"Bars",color:"#3F51B5",height:t,width:t,timeout:3e3})})}function k(e){var t=e.query,n=e.status,r=e.setStatus,o=e.pageIncrement,s=e.images,i=e.currentPage,u=e.setImages,j=Object(a.useState)(null),d=Object(l.a)(j,2),h=d[0],O=d[1],g=Object(a.useState)(!1),f=Object(l.a)(g,2),x=f[0],y=f[1],k=Object(a.useState)(!1),w=Object(l.a)(k,2),C=w[0],I=w[1],N=Object(a.useState)({}),F=Object(l.a)(N,2),L=F[0],D=F[1],E=Object(a.useState)(!0),B=Object(l.a)(E,2),P=B[0],M=B[1],q=Object(a.useRef)(!0);Object(a.useEffect)((function(){""!==t&&(1===i&&r("pending"),M(!0),v(t,i,12).then((function(e){12*i>=e.total&&M(!1),u(e.hits),r("resolved")})).catch((function(e){O({error:e}),r("rejected")})).finally((function(){x&&(z(),y(!1))})))}),[t,i]),Object(a.useEffect)((function(){q.current?q.current=!1:(console.log(L),T())}),[L]);var z=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};function T(){I((function(e){return!e}))}var G=function(){y(!0),o()};return"idle"===n?Object(c.jsx)("div",{}):"pending"===n?Object(c.jsx)("div",{children:Object(c.jsx)(S,{size:150})}):"rejected"===n?Object(c.jsx)("div",{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 ".concat(h)}):"resolved"===n?Object(c.jsxs)("div",{children:[C&&Object(c.jsx)(p,{onClick:T,src:L.largeImg,alt:L.alt}),function(){var e=Object(c.jsx)("ul",{className:"ImageGallery",children:s.map((function(e){return Object(c.jsx)(b,{img:e.webformatURL,largeImg:e.largeImageURL,alt:e.tags,onClick:D},e.id)}))}),t=Object(c.jsxs)(c.Fragment,{children:[!x&&Object(c.jsx)(m,{action:G}),x&&Object(c.jsx)(S,{size:50})]});return s.length>0?Object(c.jsxs)(c.Fragment,{children:[e,P&&t]}):Object(c.jsx)("div",{className:"MsgNothing",children:"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"})}()]}):void 0}function w(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(1),s=Object(l.a)(o,2),b=s[0],m=s[1],d=Object(a.useState)(""),h=Object(l.a)(d,2),O=h[0],g=h[1],f=Object(a.useState)("idle"),p=Object(l.a)(f,2),v=p[0],x=p[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(j,{onSubmit:function(e){O!==e&&(m(1),r([]),g(e))}}),Object(c.jsx)(k,{query:O,status:v,setStatus:x,pageIncrement:function(){m((function(e){return e+1}))},images:n,currentPage:b,setImages:function(e){r((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e))}))}}),Object(c.jsx)(u.a,{})]})}var C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root")),C()}},[[44,1,2]]]);
//# sourceMappingURL=main.18a7565b.chunk.js.map